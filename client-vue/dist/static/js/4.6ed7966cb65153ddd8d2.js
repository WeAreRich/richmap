(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"3lDU":function(e,t,n){"use strict";var o=n("hnwL");n.n(o).a},"4GRs":function(e,t,n){"use strict";t.a={MENU:{MAP:"贫困地图",RANK:"贫困排名",DETECT:"贫困监测",HELP_SERVICE:"助贫服务",TYPICAL_COMPARISONS:"典型比较",LOGO_NAME:"中国贫困在线"},SIDE_MENU:{MAP_YEAR:"地图年份",MAP_LEVEL:{TITLE:"地图级别",PROVINCE:"省",CITY:"市",COUNTY:"县/区"},MAP_SEARCH:"区域名称(输入以搜索)",MAP_TYPE:{TITLE:"地图类型选择",ADMINISTRATION_MAP:"行政地图",POOR_STATE:"贫困情况",POOR_DETECT:"贫困监测",POOR_SERVICE:"助贫服务"},DATA_TYPE:"数据类型",START_DATE:"起始时间",END_DATE:"结束时间"},ONLINE_CONSULT:{TITLE:"在线咨询",CONTENT:"微信号:zhanglingzheHUGH"},FOOTER:{UNIQUE_SERVICE:{TITLE:"特色服务",LEVEL_EVALUATE:"贫困等级估计",DATA_SUPPLY:"贫困数据提供",PLAN_ESTABLISH:"扶贫计划制定",HELP_RECOMMEND:"志愿帮扶推荐"},CONTACT:{TITLE:"联系我们",PHONE_CHENGDU:"028-84073638",NAME_CHENGDU:"成都",PHONE_NANJING:"025-89680960 428",NAME_NANJING:"南京"}},ACCOUNT:{LOGIN:{TITLE:"登录",USERNAME:"用户名",PASSWORD:"密码"}},GUIDE:{DATA_YEAR:"数据年份"},SEARCH:{TITLE:"聚合搜索"}}},"4spQ":function(e,t,n){"use strict";var o=n("OLCW");n.n(o).a},"5sHj":function(e,t,n){var o=n("SLcA");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),n("SZ7m")("98f9371a",o,!0,{})},"6Ev8":function(e,t,n){var o=n("rX3U");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),n("SZ7m")("d4211888",o,!0,{})},"7Prd":function(e,t,n){"use strict";var o=n("b2Mp");n.n(o).a},"9FP4":function(e,t,n){(e.exports=n("I1BE")(!0)).push([e.i,".top[data-v-40d0625c]{height:100px}","",{version:3,sources:["/Users/law/richmap/client-vue/src/components/pages/src/components/pages/MapHome.vue"],names:[],mappings:"AAiIA,sBACA,YAAA,CACA",file:"MapHome.vue?vue&type=style&index=0&id=40d0625c&scoped=true&lang=css",sourcesContent:["<template>\n    <div>\n        <div class=\"top\">\n\n        </div>\n        <layout>\n            <Sider style=\"background-color: white\" hide-trigger>\n                <detect-fixed-side-menu\n                        v-on:child-say=\"chooseMap\"\n                        v-on:on-select-place=\"handleSelectPalce\"\n                        v-on:on-play=\"handlePlayMap\"\n                        v-on:on-stop=\"handleStopMap\"\n                ></detect-fixed-side-menu>\n            </Sider>\n            <Layout>\n                <poverty-map @on-map-load=\"handleOnMapLoad\"></poverty-map>\n                <consulting></consulting>\n            </Layout>\n        </layout>\n    </div>\n</template>\n\n<script lang=\"ts\">\n  declare var require : (filename,resolve)=>any;\n  // const Consulting = (r) => require(['../common/Consulting.vue'],r);\n  // const DetectFixedSideMenu = (r) => require([\"../common/DetectFixedSideMenu.vue\"],r);\n  // const PovertyMap = (r) => require([\"../common/map/poverty-map/PovertyMap.vue\"],r);\n  import { Vue, Component } from \"vue-property-decorator\";\n  import Consulting from \"../common/Consulting.vue\";\n  import DetectFixedSideMenu from \"../common/DetectFixedSideMenu.vue\";\n  import PovertyMap from \"../common/map/poverty-map/PovertyMap.vue\";\n  import { Logger } from '../../services/Logger';\n  import { MapLocatePositionService } from '../../services/map-locate-position.service';\n  import { MapSourceService } from '../../services/api/map-source/MapSourceService';\n  import { api } from '../../services/api/ApiProvider';\n  import { Message } from '../../services/Message';\n  import { HUBEI_BOUNDS } from '../../constants/mapbox';\n  import { MapSourceAnimationService } from '../../services/map-source-animation.service';\n  import { MapboxSource } from '../../types/mapbox-source';\n  import {Sider,Layout} from 'iview'\n\n  @Component({\n    components: {Consulting, DetectFixedSideMenu, PovertyMap,Sider,Layout}\n  })\n\n  export default class MapHome extends Vue {\n    private TAG = 'MapHome.vue';\n    private map: mapboxgl.Map;\n    private SHOWING_SOURCE = 'showing-source';\n    private sourceApi: MapSourceService;\n    private messageService: Message;\n    private mapAnimationService: MapSourceAnimationService;\n\n    private mapSources: MapboxSource[] = []; // 地图源\n\n    mounted() {\n      this.sourceApi = api.mapSourceService;\n      this.messageService = new Message(this);\n    }\n\n    handleOnMapLoad(map: mapboxgl.Map) {\n      Logger.info(this.TAG, 'map loaded', map);\n      this.map = map;\n      this.mapAnimationService = new MapSourceAnimationService(map);\n    }\n\n    async chooseMap(year, name){\n      console.log(year, name);\n      console.log('in map home');\n      // const map = this.map;\n      if (!this.map) {\n        this.messageService.error('请等待地图组件加载完成...')\n      }\n      // MapLocatePositionService.locateToPosition([place.lon, place.lat], this.map);\n      if (this.map.isSourceLoaded(this.SHOWING_SOURCE)) {\n        this.map.removeLayer(this.SHOWING_SOURCE);\n        this.map.removeSource(this.SHOWING_SOURCE);\n      }\n      try {\n        let res = await this.sourceApi.getByNameAndYear(name, year);\n        const item = res[0];\n        console.log('【MapHome】', item);\n        if (!item) throw new Error('no source result');\n        let source: mapboxgl.RasterSource = {\n          type: 'raster',\n          url: item.url\n        };\n        this.map.addSource(this.SHOWING_SOURCE, source);\n        this.map.addLayer({\n          id: this.SHOWING_SOURCE,\n          type: 'raster',\n\n          source: this.SHOWING_SOURCE\n        });\n      } catch (e) {}\n    }\n\n\n    handleSelectPalce(item) {\n      const bounds = HUBEI_BOUNDS;\n      const lon = item.lon;\n      const lat = item.lat;\n      if (lon < bounds[0][0] || lon > bounds[1][0] || lat < bounds[0][1] || lat > bounds[1][1]) {\n        this.messageService.error('选择的地点超出范围');\n      } else {\n        MapLocatePositionService.locateToPosition([lon, lat], this.map);\n      }\n    }\n\n    async handlePlayMap(startYear, endYear, name) {\n      if (!this.mapSources.length) {\n        try {\n          let res = await this.sourceApi.getByName(name);\n          this.mapSources = res;\n          Logger.info(this.TAG, 'get sources', res);\n          await this.mapAnimationService.addSources(this.mapSources);\n        } catch (e) {}\n      }\n      Logger.info(this.TAG, this.mapSources.length);\n      this.mapAnimationService.autoDisplayByRange(startYear, endYear);\n    }\n\n    handleStopMap() {\n      this.mapAnimationService.hideAllLayer();\n    }\n  }\n<\/script>\n\n<style scoped>\n    .top{\n        height: 100px;\n    }\n</style>"],sourceRoot:""}])},E8he:function(e,t,n){(e.exports=n("I1BE")(!0)).push([e.i,".layout-side[data-v-1fd2b562]{background-color:#fff}","",{version:3,sources:["/Users/law/richmap/client-vue/src/components/common/src/components/common/DetectFixedSideMenu.vue"],names:[],mappings:"AAmJA,8BACA,qBAAA,CACA",file:"DetectFixedSideMenu.vue?vue&type=style&index=0&id=1fd2b562&scoped=true&lang=css",sourcesContent:['<template>\n    <div class="layout-side">\n        <map-query-component v-on:child-say="listenToMyBoy"></map-query-component>\n        <div style="background-color:whitesmoke;margin: 5px;-webkit-border-radius: 5px">\n            \x3c!--<Cascader :placeholder="dataType" size="large" :data="dataTypeList" v-model="dataTypeValue"--\x3e\n                      \x3c!--style="padding:20px"></Cascader>--\x3e\n            <Select placeholder="数据类型" size="large" v-model="dataType" style="padding: 10px 20px;">\n                <Option v-for="op in typeOptions" :value="op.value">\n                    {{op.label}}\n                </Option>\n            </Select>\n            <DatePicker\n                    type="year"\n                    :placeholder="startDate"\n                    v-model="startYear"\n                    style="padding-left:20px;padding-right:20px;"></DatePicker>\n            <DatePicker\n                    type="year"\n                    :placeholder="endDate"\n                    v-model="endYear"\n                    style="padding-left:20px;padding-right:20px;"></DatePicker>\n            <div style="text-align: center">\n                <Button type="text" icon="play" size="large" @click="handlePlay" :disabled="isPlaying"></Button>\n                <Button type="text" icon="stop" size="large" @click="handleStop" :disabled="!isPlaying"></Button>\n            </div>\n        </div>\n        <div style="background-color:whitesmoke;margin: 5px;-webkit-border-radius: 5px">\n            <SearchPlace @on-select-place="handleSelectPlace"></SearchPlace>\n        </div>\n        \x3c!--<Cascader :placeholder="mapType" size="large" :data="mapTypeList" v-model="mapTypeValue"--\x3e\n                  \x3c!--style="padding:20px"></Cascader>--\x3e\n    </div>\n</template>\n<script lang="ts">\n  import { Component, Vue } from "vue-property-decorator";\n  import SENTENCES from "../../assets/sentences/index";\n  import { MapTypeOption } from "../../models/MapTypeOption";\n  import { api } from "../../services/api/ApiProvider";\n  import MapQueryComponent from "./map/MapQueryComponent.vue";\n  import SearchPlace from \'./map/SearchPlace\';\n  import { Logger } from \'../../services/Logger\';\n  import { Message } from \'../../services/Message\';\n  import {Select, Option, Button, DatePicker} from \'iview\';\n\n\n  const TAG = \'DetectFixedSideMenu\';\n\n\n  @Component({\n    components: {SearchPlace, MapQueryComponent, Select, Option, Button, DatePicker}\n  })\n  export default class DetectFixedSideMenu extends Vue{\n    dataType: string = \'\';\n    startDate: string = SENTENCES.SIDE_MENU.START_DATE;\n    endDate: string = SENTENCES.SIDE_MENU.END_DATE;\n    mapType: string = SENTENCES.SIDE_MENU.MAP_TYPE.TITLE;\n    mapTypeAdministration: string = SENTENCES.SIDE_MENU.MAP_TYPE.ADMINISTRATION_MAP;\n    mapPoorState: string = SENTENCES.SIDE_MENU.MAP_TYPE.POOR_STATE;\n    mapPoorDetect: string = SENTENCES.SIDE_MENU.MAP_TYPE.POOR_DETECT;\n    mapPoorService: string = SENTENCES.SIDE_MENU.MAP_TYPE.POOR_SERVICE;\n\n    messageService: Message;\n\n    dataTypeList: MapTypeOption[] = [];\n    mapTypeList: MapTypeOption[] = [];\n\n    startYear: Date = undefined;\n    endYear: Date = undefined;\n\n    isPlaying: boolean = false;\n\n    public typeOptions =  [{\n      label: \'DEM\',\n      value: \'hubeiDEM\'\n    }, {\n      label: \'GDP\',\n      value: \'hubeiGDP\'\n    }, {\n      label: \'坡度\',\n      value: \'hubeiSlope\'\n    }, {\n      label: \'夜间灯光\',\n      value: \'hubeiNightLight\'\n    }];\n\n\n    dataTypeValue: string[] = [];\n    mapTypeValue: string[] = [];\n\n    listenToMyBoy(year, place){\n      console.log(year+" "+place);\n      this.$emit(\'child-say\', year, place)\n    }\n\n    async mounted() {\n      // this.dataTypeList = [\'坡度数据\'];\n      this.dataTypeList = await api.dataAnalysisService.getPoorState();\n      this.mapTypeList = [\n        {\n          value: this.mapTypeAdministration,\n          label: this.mapTypeAdministration,\n          children: []\n        },\n        {\n          value: this.mapPoorState,\n          label: this.mapPoorState,\n          children: this.dataTypeList\n        }\n        ,\n        {\n          value: this.mapPoorDetect,\n          label: this.mapPoorDetect,\n          children: []\n        }\n        ,\n        {\n          value: this.mapPoorService,\n          label: this.mapPoorService,\n          children: []\n        }\n      ];\n      this.messageService = new Message(this);\n    };\n\n    handleSelectPlace(item) {\n      Logger.info(TAG, item);\n      this.$emit(\'on-select-place\', item);\n    }\n\n    handlePlay() {\n      Logger.info(TAG, this.startYear, this.endYear, this.dataType);\n      if (!this.startYear || !this.endYear || !this.dataType) {\n        this.messageService.error(\'请确保填写了各项参数\');\n      } else {\n        this.isPlaying = true;\n        this.$emit(\'on-play\', this.startYear.getFullYear(), this.endYear.getFullYear(), this.dataType);\n      }\n    }\n\n    handleStop() {\n      this.$emit(\'on-stop\');\n      this.isPlaying = false;\n    }\n  }\n<\/script>\n\n<style scoped>\n    .layout-side {\n        background-color: white;\n    }\n</style>'],sourceRoot:""}])},GVgK:function(e,t,n){var o=n("HcE8");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),n("SZ7m")("65ea3e8c",o,!0,{})},HcE8:function(e,t,n){(e.exports=n("I1BE")(!0)).push([e.i,".fixed-consult[data-v-25478c0a]{position:fixed;z-index:9999;right:10px;bottom:6%}","",{version:3,sources:["/Users/law/richmap/client-vue/src/components/common/src/components/common/Consulting.vue"],names:[],mappings:"AAwBA,gCACA,eAAA,AACA,aAAA,AACA,WAAA,AACA,SAAA,CACA",file:"Consulting.vue?vue&type=style&index=0&id=25478c0a&scoped=true&lang=css",sourcesContent:['<template>\n    <Affix :offset-right="0">\n        <div class="fixed-consult">\n            <Poptip trigger="hover" :title="onlineConsultTitle" :content="onlineConsultContent">\n                <Button icon="chatbox-working" size="large" type="primary">{{onlineConsultTitle}}</Button>\n            </Poptip>\n        </div>\n    </Affix>\n</template>\n<script lang="ts">\n  import {Component, Emit, Inject, Model, Prop, Provide, Vue, Watch} from \'vue-property-decorator\';\n  import SENTENCES from "../../assets/sentences/index";\n  import {Affix, Poptip, Button} from \'iview\';\n\n  @Component({\n    components: {Affix, Poptip, Button}\n  })\n  export default class Consulting extends Vue {\n    onlineConsultTitle: string = SENTENCES.ONLINE_CONSULT.TITLE;\n    onlineConsultContent: string = SENTENCES.ONLINE_CONSULT.CONTENT;\n  }\n<\/script>\n\n<style scoped>\n    .fixed-consult {\n        position: fixed;\n        z-index: 9999;\n        right: 10px;\n        bottom: 6%;\n    }\n</style>'],sourceRoot:""}])},JQav:function(e,t,n){"use strict";var o=n("GVgK");n.n(o).a},LdhC:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){}return e.info=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if((new Date).toLocaleTimeString(),console.info)for(var r=0,i=n;r<i.length;r++)i[r];else e.log.apply(e,[t].concat(n))},e.error=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if((new Date).toLocaleTimeString(),console.error)for(var r=0,i=n;r<i.length;r++)i[r];else e.log.apply(e,[t].concat(n))},e.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(new Date).toLocaleTimeString();for(var o=0,r=t;o<r.length;o++)r[o]},e}()},"OK+q":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return r}),n.d(t,"e",function(){return a});var o="pk.eyJ1Ijoid2VueGlhbmdkb25nIiwiYSI6ImNqajEyN2owYjBvNHYzdm10c2p2NXowM2kifQ.kixIr8Jwk2mAqmlQCWW88Q",r=[[108.3,29],[116.3,33.3]],i={"night-light-2001":"mapbox://styles/wenxiangdong/cjjuyolqw21sf2rmmrrp13azv","night-light-2013":"mapbox://styles/wenxiangdong/cjjuzjzid0a1a2ro45v4abumf"},a={hubeiDEM:"mapbox://wenxiangdong.6mjehw01",hubeiGDP:"mapbox://wenxiangdong.aa00vskv",hubeiSlope:"mapbox://wenxiangdong.9vwvp9tc",hubieNightLight:"mapbox://wenxiangdong.527q7f2p"},s="rec-layer-id"},OLCW:function(e,t,n){var o=n("heDD");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),n("SZ7m")("79222ff1",o,!0,{})},PDH9:function(e,t,n){"use strict";n.r(t);var o,r=n("GWDc"),i=n("cK5h"),a=n("YKMj"),s=n("AfiY"),c=n("YHm0"),l=n("z6Um"),u=n("4GRs"),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onlineConsultTitle=u.a.ONLINE_CONSULT.TITLE,t.onlineConsultContent=u.a.ONLINE_CONSULT.CONTENT,t}return h(t,e),function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([Object(a.a)({components:{Affix:l.a,Poptip:c.a,Button:s.a}})],t)}(a.d),f=(n("JQav"),n("KHd+")),y=Object(f.a)(d,function(){var e=this.$createElement,t=this._self._c||e;return t("Affix",{attrs:{"offset-right":0}},[t("div",{staticClass:"fixed-consult"},[t("Poptip",{attrs:{trigger:"hover",title:this.onlineConsultTitle,content:this.onlineConsultContent}},[t("Button",{attrs:{icon:"chatbox-working",size:"large",type:"primary"}},[this._v(this._s(this.onlineConsultTitle))])],1)],1)])},[],!1,null,"25478c0a",null).exports,m=n("Ga51"),v=n("CT9D"),b=n("MRqH"),S=n("gtj/"),g=n("8tg7"),E=n("2ELc"),A=n("Kw5r"),L=n("mJf8"),_=n("jF86"),x=n("LdhC"),T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=function(e){function t(){var t=e.call(this)||this;return t.mapSearch=u.a.SIDE_MENU.MAP_SEARCH,t.TAG="SearchPlace",t.nominatimService=new _.a,t.query="",t.searchItems=[],t}return w(t,e),t.prototype.handleSearch=function(e){return function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var t;return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(n){switch(n.label){case 0:if(x.a.info(this.TAG,"search",e),!e)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),t=this,[4,this.nominatimService.search(e)];case 2:return t.searchItems=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}})})},t.prototype.handleSelectPlace=function(e){x.a.info(this.TAG,"select "+e),this.$emit("set-place",e);var t=this.searchItems.findIndex(function(t){return t.display_name===e});if(t<0)x.a.error(this.TAG,"not found "+e);else{var n=this.searchItems[t];this.$emit("on-select-place",n)}},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":T(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([Object(a.a)({components:{AutoComplete:L.a,Option:v.a}})],t)}(A.default),C=(n("vL7V"),Object(f.a)(P,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("AutoComplete",{attrs:{placeholder:e.mapSearch,size:"large",clearable:""},on:{"on-select":e.handleSelectPlace,"on-search":e.handleSearch},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},e._l(e.searchItems,function(t,o){return n("Option",{key:o,attrs:{value:t.display_name}},[n("span",[e._v(e._s(t.display_name))])])}))],1)},[],!1,null,"481544e3",null).exports),D=function(){function e(e){this._vm=e}return e.prototype.info=function(e){this._vm.$Message.info(e)},e.prototype.error=function(e){this._vm.$Message.error(e)},e}(),I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=function(e){function t(){var t=e.call(this)||this;return t.mapYear=u.a.SIDE_MENU.MAP_YEAR,t.selectedYear=void 0,t.dataType="",t.rules={selectedPlace:[{required:!0,message:"地点不能为空",trigger:"blur"}],selectedYear:[{required:!0,message:"年份不能为空",trigger:"blur"}]},t.typeOptions=[{label:"DEM",value:"hubeiDEM"},{label:"GDP",value:"hubeiGDP"},{label:"坡度",value:"hubeiSlope"},{label:"夜间灯光",value:"hubeiNightLight"}],t.messageService=new D(t),t}return O(t,e),t.prototype.handleSelectPlace=function(e){this.selectedPlace=e},t.prototype.handleClickSearch=function(){this.selectedYear?this.dataType?this.$emit("child-say",this.selectedYear.getFullYear(),this.dataType):this.messageService.error("请选择一个类型"):this.messageService.error("请选择一个年份")},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":I(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([Object(a.a)({components:{SearchPlace:C,Form:E.a,FormItem:g.a,Button:s.a,DatePicker:m.a,Select:b.a,Option:v.a}})],t)}(A.default),N=(n("UljM"),Object(f.a)(M,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{ref:"paramsForm",staticStyle:{padding:"20px","background-color":"whitesmoke",margin:"5px","-webkit-border-radius":"5px"},attrs:{ruls:e.rules}},[n("FormItem",{attrs:{prop:"selectedYear"}},[n("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"year",size:"large",placeholder:e.mapYear},model:{value:e.selectedYear,callback:function(t){e.selectedYear=t},expression:"selectedYear"}})],1),e._v(" "),n("FormItem",{attrs:{prop:"selectedPlace"}},[n("Select",{attrs:{placeholder:"数据类型",size:"large"},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},e._l(e.typeOptions,function(t){return n("Option",{attrs:{value:t.value}},[e._v("\n                "+e._s(t.label)+"\n            ")])}))],1),e._v(" "),n("FormItem",[n("Button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"large"},on:{click:e.handleClickSearch}},[e._v("确定\n        ")])],1)],1)},[],!1,null,"56d4c962",null).exports),R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Y="DetectFixedSideMenu",B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dataType="",t.startDate=u.a.SIDE_MENU.START_DATE,t.endDate=u.a.SIDE_MENU.END_DATE,t.mapType=u.a.SIDE_MENU.MAP_TYPE.TITLE,t.mapTypeAdministration=u.a.SIDE_MENU.MAP_TYPE.ADMINISTRATION_MAP,t.mapPoorState=u.a.SIDE_MENU.MAP_TYPE.POOR_STATE,t.mapPoorDetect=u.a.SIDE_MENU.MAP_TYPE.POOR_DETECT,t.mapPoorService=u.a.SIDE_MENU.MAP_TYPE.POOR_SERVICE,t.dataTypeList=[],t.mapTypeList=[],t.startYear=void 0,t.endYear=void 0,t.isPlaying=!1,t.typeOptions=[{label:"DEM",value:"hubeiDEM"},{label:"GDP",value:"hubeiGDP"},{label:"坡度",value:"hubeiSlope"},{label:"夜间灯光",value:"hubeiNightLight"}],t.dataTypeValue=[],t.mapTypeValue=[],t}return k(t,e),t.prototype.listenToMyBoy=function(e,t){this.$emit("child-say",e,t)},t.prototype.mounted=function(){return function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var e;return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(t){switch(t.label){case 0:return e=this,[4,S.a.dataAnalysisService.getPoorState()];case 1:return e.dataTypeList=t.sent(),this.mapTypeList=[{value:this.mapTypeAdministration,label:this.mapTypeAdministration,children:[]},{value:this.mapPoorState,label:this.mapPoorState,children:this.dataTypeList},{value:this.mapPoorDetect,label:this.mapPoorDetect,children:[]},{value:this.mapPoorService,label:this.mapPoorService,children:[]}],this.messageService=new D(this),[2]}})})},t.prototype.handleSelectPlace=function(e){x.a.info(Y,e),this.$emit("on-select-place",e)},t.prototype.handlePlay=function(){x.a.info(Y,this.startYear,this.endYear,this.dataType),this.startYear&&this.endYear&&this.dataType?(this.isPlaying=!0,this.$emit("on-play",this.startYear.getFullYear(),this.endYear.getFullYear(),this.dataType)):this.messageService.error("请确保填写了各项参数")},t.prototype.handleStop=function(){this.$emit("on-stop"),this.isPlaying=!1},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":R(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([Object(a.a)({components:{SearchPlace:C,MapQueryComponent:N,Select:b.a,Option:v.a,Button:s.a,DatePicker:m.a}})],t)}(a.d),G=(n("7Prd"),Object(f.a)(B,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout-side"},[n("map-query-component",{on:{"child-say":e.listenToMyBoy}}),e._v(" "),n("div",{staticStyle:{"background-color":"whitesmoke",margin:"5px","-webkit-border-radius":"5px"}},[n("Select",{staticStyle:{padding:"10px 20px"},attrs:{placeholder:"数据类型",size:"large"},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},e._l(e.typeOptions,function(t){return n("Option",{attrs:{value:t.value}},[e._v("\n                "+e._s(t.label)+"\n            ")])})),e._v(" "),n("DatePicker",{staticStyle:{"padding-left":"20px","padding-right":"20px"},attrs:{type:"year",placeholder:e.startDate},model:{value:e.startYear,callback:function(t){e.startYear=t},expression:"startYear"}}),e._v(" "),n("DatePicker",{staticStyle:{"padding-left":"20px","padding-right":"20px"},attrs:{type:"year",placeholder:e.endDate},model:{value:e.endYear,callback:function(t){e.endYear=t},expression:"endYear"}}),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("Button",{attrs:{type:"text",icon:"play",size:"large",disabled:e.isPlaying},on:{click:e.handlePlay}}),e._v(" "),n("Button",{attrs:{type:"text",icon:"stop",size:"large",disabled:!e.isPlaying},on:{click:e.handleStop}})],1)],1),e._v(" "),n("div",{staticStyle:{"background-color":"whitesmoke",margin:"5px","-webkit-border-radius":"5px"}},[n("SearchPlace",{on:{"on-select-place":e.handleSelectPlace}})],1)],1)},[],!1,null,"1fd2b562",null).exports),U=n("iFuS"),j=n("4ZJM"),V=n.n(j),H=n("OK+q"),F=function(){function e(){}return e.locateToBounds=function(e,t,n){void 0===n&&(n=!1),x.a.info("MapLocatePositionService","locateToBounds",e),t.fitBounds(e),n&&t.removeLayer(H.c)},e.locateToPosition=function(e,t,n,o){void 0===n&&(n=7),void 0===o&&(o=!0),t.flyTo({center:e,curve:1,zoom:n}),o&&(this.marker&&this.marker.remove(),this.marker=(new V.a.Marker).setLngLat(e).addTo(t))},e}(),q=function(){function e(e){this.map=e,this.TAG="MapSourceAnimationService",this.ID="sourceId",this.counter=0,this.layers=[],this.sourceIds=[],this.mapboxSources=[]}return e.prototype.addSource=function(e){var t=this;return new Promise(function(n){var o={type:"raster",url:e.url},r=t.ID+t.counter++;e.ID=r,t.map.addSource(r,o),t.sourceIds.push(r),t.map.on("sourcedata",function(){n(r)})})},e.prototype.addSources=function(e){var t=this;this.mapboxSources=e;var n=e.map(function(e){return t.addSource(e)});return Promise.all(n)},e.prototype.showLayer=function(e){x.a.info(this.TAG,"id: "+e);var t=this.layers.findIndex(function(t){return t.id===e.toString()});if(t>-1)this.map.addLayer(this.layers[t]),x.a.info(this.TAG,"exist layer "+e);else{x.a.info(this.TAG,"not exist layer "+e);var n={id:e.toString(),type:"raster",source:e.toString()};this.map.addLayer(n),x.a.info(this.TAG,"add layer "+e),this.layers.push(n)}},e.prototype.hideLayer=function(e){this.layers.findIndex(function(t){return t.id===e.toString()})>-1&&(x.a.info(this.TAG,"remove"),this.map.removeLayer(e.toString()))},e.prototype.autoDisplay=function(){this.sourceIds.sort(),x.a.info(this.TAG,this.sourceIds),this.reAutoDisplay(0)},e.prototype.autoDisplayByRange=function(e,t){var n=this.mapboxSources.filter(function(n){return e<=n.year&&n.year<=t});x.a.info(this.TAG,n),this.reAutoDisplayByRange(n,0)},e.prototype.reAutoDisplay=function(e){var t=this;e!==this.sourceIds.length&&(e>0&&this.hideLayer(this.sourceIds[e-1]),this.showLayer(this.sourceIds[e]),setTimeout(function(){t.reAutoDisplay(e+1)},1e3))},e.prototype.reAutoDisplayByRange=function(e,t){var n=this;t!==e.length&&(t>0&&this.hideLayer(e[t-1].ID),this.showLayer(e[t].ID),setTimeout(function(){n.reAutoDisplay(t+1)},1e3))},e.prototype.hideAllLayer=function(){var e=this;x.a.info(this.TAG,"hide all"),this.layers.forEach(function(t){try{e.map.removeLayer(t.id)}catch(e){}})},e}(),z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})},K=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TAG="MapHome.vue",t.SHOWING_SOURCE="showing-source",t.mapSources=[],t}return W(t,e),t.prototype.mounted=function(){this.sourceApi=S.a.mapSourceService,this.messageService=new D(this)},t.prototype.handleOnMapLoad=function(e){x.a.info(this.TAG,"map loaded",e),this.map=e,this.mapAnimationService=new q(e)},t.prototype.chooseMap=function(e,t){return $(this,void 0,void 0,function(){var n,o,r;return K(this,function(i){switch(i.label){case 0:this.map||this.messageService.error("请等待地图组件加载完成..."),this.map.isSourceLoaded(this.SHOWING_SOURCE)&&(this.map.removeLayer(this.SHOWING_SOURCE),this.map.removeSource(this.SHOWING_SOURCE)),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.sourceApi.getByNameAndYear(t,e)];case 2:if(n=i.sent(),!(o=n[0]))throw new Error("no source result");return r={type:"raster",url:o.url},this.map.addSource(this.SHOWING_SOURCE,r),this.map.addLayer({id:this.SHOWING_SOURCE,type:"raster",source:this.SHOWING_SOURCE}),[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}})})},t.prototype.handleSelectPalce=function(e){var t=H.b,n=e.lon,o=e.lat;n<t[0][0]||n>t[1][0]||o<t[0][1]||o>t[1][1]?this.messageService.error("选择的地点超出范围"):F.locateToPosition([n,o],this.map)},t.prototype.handlePlayMap=function(e,t,n){return $(this,void 0,void 0,function(){var o;return K(this,function(r){switch(r.label){case 0:if(this.mapSources.length)return[3,5];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this.sourceApi.getByName(n)];case 2:return o=r.sent(),this.mapSources=o,x.a.info(this.TAG,"get sources",o),[4,this.mapAnimationService.addSources(this.mapSources)];case 3:case 4:return r.sent(),[3,5];case 5:return x.a.info(this.TAG,this.mapSources.length),this.mapAnimationService.autoDisplayByRange(e,t),[2]}})})},t.prototype.handleStopMap=function(){this.mapAnimationService.hideAllLayer()},function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":z(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}([Object(a.a)({components:{Consulting:y,DetectFixedSideMenu:G,PovertyMap:U.a,Sider:i.a,Layout:r.a}})],t)}(a.d),J=(n("3lDU"),Object(f.a)(Q,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"top"}),e._v(" "),n("layout",[n("Sider",{staticStyle:{"background-color":"white"},attrs:{"hide-trigger":""}},[n("detect-fixed-side-menu",{on:{"child-say":e.chooseMap,"on-select-place":e.handleSelectPalce,"on-play":e.handlePlayMap,"on-stop":e.handleStopMap}})],1),e._v(" "),n("Layout",[n("poverty-map",{on:{"on-map-load":e.handleOnMapLoad}}),e._v(" "),n("consulting")],1)],1)],1)},[],!1,null,"40d0625c",null));t.default=J.exports},SLcA:function(e,t,n){(e.exports=n("I1BE")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"MapQueryComponent.vue?vue&type=style&index=0&id=56d4c962&scoped=true&lang=css",sourceRoot:""}])},UljM:function(e,t,n){"use strict";var o=n("5sHj");n.n(o).a},b2Mp:function(e,t,n){var o=n("E8he");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),n("SZ7m")("d15996e4",o,!0,{})},"gtj/":function(e,t,n){"use strict";var o=function(){function e(){}return e.prototype.getPoorState=function(){return function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})}(this,void 0,void 0,function(){return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(e){return[2,[{value:"综合贫困排名",label:"综合贫困排名",children:[{value:"VSR指标排名",label:"VSR指标排名",children:[{value:"夜间灯光指标",label:"夜间灯光指标",children:[]}]}]},{value:"分类贫困排名",label:"分类贫困排名",children:[{value:"经济指标排名",label:"经济指标排名",children:[{value:"未来收入",label:"未来收入",children:[]}]}]}]]})})},e}(),r=n("ja1a"),i=function(){function e(){}return e.prototype.getPoorState=function(){return function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})}(this,void 0,void 0,function(){return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(e){switch(e.label){case 0:return[4,r.b.fetch({path:"analysis/state"})];case 1:return[2,e.sent().response]}})})},e}(),a=function(){function e(){}return e.prototype.search=function(e){return function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})}(this,void 0,void 0,function(){return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(t){switch(t.label){case 0:return[4,r.b.fetch({path:"search",queryParams:{kw:e}})];case 1:return[2,t.sent().response]}})})},e}(),s=function(){function e(){}return e.prototype.search=function(e){return function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})}(this,void 0,void 0,function(){return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(e){return[2,void 0]})})},e}(),c=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})},l=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=function(){function e(){}return e.prototype.getByName=function(e){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,r.b.fetch({path:"map",queryParams:{name:e}})];case 1:return[2,t.sent().response]}})})},e.prototype.getByNameAndYear=function(e,t){return c(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return[4,r.b.fetch({path:"map/year",queryParams:{name:e,year:t}})];case 1:return[2,n.sent().response]}})})},e}(),p=function(e,t,n,o,r){this.ID=e,this.type=t,this.name=n,this.url=o,this.year=r},h=n("OK+q"),d=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})},f=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},y=new p(1,"raster","hubeiGDP","mapbox://wenxiangdong.aa00vskv",2010),m=function(){function e(){}return e.prototype.getByName=function(e){return d(this,void 0,void 0,function(){var e;return f(this,function(t){return(e=[]).push({ID:1,type:"raster",name:"name",url:h.e.hubeiDEM,year:2010}),e.push({ID:2,type:"raster",name:"name",url:h.e.hubeiGDP,year:2011}),e.push({ID:3,type:"raster",name:"name",url:h.e.hubeiSlope,year:2012}),e.push({ID:4,type:"raster",name:"name",url:h.e.hubieNightLight,year:2013}),[2,e]})})},e.prototype.getByNameAndYear=function(e,t){return d(this,void 0,void 0,function(){return f(this,function(e){return[2,[y]]})})},e}();n.d(t,"a",function(){return v});var v=new function(){this.isMock=!1,this.isMock?(this.dataAnalysisService=new o,this.searchService=new s,this.mapSourceService=new m):(this.dataAnalysisService=new i,this.searchService=new a,this.mapSourceService=new u)}},heDD:function(e,t,n){(e.exports=n("I1BE")(!0)).push([e.i,".outer[data-v-104067d7]{position:relative;background:inherit;width:100%;box-shadow:0 0 10px rgba(0,0,0,.5)}#map-container[data-v-104067d7]{height:800px;width:100%}.border-control[data-v-104067d7]{top:10px;left:10px;display:inline-block;position:absolute;z-index:999}","",{version:3,sources:["/Users/law/richmap/client-vue/src/components/common/map/poverty-map/src/components/common/map/poverty-map/PovertyMap.vue"],names:[],mappings:"AAyMA,wBACA,kBAAA,AAEA,mBAAA,AACA,WAAA,AACA,kCAAA,CACA,AAEA,gCACA,aAAA,AACA,UAAA,CACA,AAEA,iCACA,SAAA,AACA,UAAA,AACA,qBAAA,AAEA,kBAAA,AACA,WAAA,CACA",file:"PovertyMap.vue?vue&type=style&index=0&id=104067d7&scoped=true&lang=css",sourcesContent:["<template>\n    <div class=\"outer\">\n        <div class=\"border-control\">\n            <Dropdown trigger=\"click\" style=\"position: relative\" placement=\"bottom-start\">\n                <Tooltip content=\"边界\" placement=\"right\">\n                    <Button icon=\"ios-browsers\"></Button>\n                </Tooltip>\n                <DropdownMenu slot=\"list\" style=\"text-align: left; width: 130px;\">\n                    <div style=\"display: flex; flex-direction: column; padding: 10px;\">\n                        <Checkbox label=\"一级行政区边界\" @on-change=\"handleChangeFirstLevelCheckBox\">一级行政区边界</Checkbox>\n                        <Checkbox label=\"二级行政区边界\" @on-change=\"handleChangeSecondLevelCheckBox\">二级行政区边界</Checkbox>\n                        <Checkbox label=\"三级行政区边界\" @on-change=\"handleChangeThirdLevelCheckBox\">三级行政区边界</Checkbox>\n                    </div>\n                </DropdownMenu>\n            </Dropdown>\n        </div>\n        <div id=\"map-container\"></div>\n    </div>\n</template>\n\n<script lang=\"ts\">\n  import Vue from 'vue';\n  import { Component, Emit, Prop, Watch } from 'vue-property-decorator';\n  import NominatimService from '../../../../services/nominatim.service';\n  import { Logger } from '../../../../services/Logger';\n  import mapboxgl from 'mapbox-gl';\n  import { ACCESS_TOKEN, CHINA_BOUNDS, CHINA_CENTER, HUBEI_BOUNDS } from '../../../../constants/mapbox';\n  import PlaceItem from '../../../../types/place-item';\n  import {Dropdown, Tooltip, DropdownMenu, Checkbox, Button} from 'iview';\n\n  @Component({\n    components: {Dropdown, Tooltip, DropdownMenu, Checkbox, Button}\n  })\n  export default class PovertyMap extends Vue {\n    private TAG = 'PovertyMap';\n    private FIRST_LEVEL_LAYER_ID = 'first-level';\n    private SECOND_LEVEL_LAYER_ID = 'second-level';\n    private THIRD_LEVEL_LAYER_ID = 'third-level';\n    private borderPaint = {\n      'line-color': 'rgba(255,255,255,0.5)',\n      'line-width': 2\n    };\n\n    // 行政区域划分图层\n    private firstLevelLayer: mapboxgl.Layer;\n    private secondLevelLayer: mapboxgl.Layer;\n    private thirdLevelLayer: mapboxgl.Layer;\n    private map: mapboxgl.Map;\n\n\n    // 基础地图源\n    @Prop({\n      default: () => 'mapbox://styles/mapbox/satellite-v9'\n    })\n    public mapUrl: string;\n\n\n    @Watch('mapUrl')\n    onMapUrlChange(val: string, oldVal: string) {\n      Logger.info(this.TAG, val, oldVal);\n      this.map.setStyle(val);\n    }\n\n    // data\n    public query: string;\n    public searchItems: PlaceItem[];\n\n    // services\n    private nominatimService: NominatimService;\n\n    constructor() {\n      super();\n      Logger.info(this.TAG, \"constructor\");\n      this.query = \"\";\n      this.searchItems = [];\n      this.nominatimService = new NominatimService();\n    }\n\n    mounted() {\n      Logger.info(this.TAG, \"mounted\");\n      this.initMap();\n    }\n\n    private initMap() {\n      Logger.info(this.TAG, \"start init map\");\n      mapboxgl.accessToken = ACCESS_TOKEN;\n      this.map = new mapboxgl.Map({\n        container: 'map-container',\n        style: this.mapUrl,\n        // center: CHINA_CENTER,\n        maxBounds: HUBEI_BOUNDS\n      });\n      // 增加控件\n      this.map.addControl(new mapboxgl.NavigationControl());\n      this.map.addControl(new mapboxgl.ScaleControl());\n      // 初始化完成\n      this.map.on(\"load\", () => {\n        this.onMapLoad(this.map);\n        // console.log(this.map.getZoom());\n      });\n    }\n\n    /* 事件emit */\n    // 地图加载完成，返回一个 mapboxgl 地图对象\n    @Emit()\n    public onMapLoad(map: mapboxgl.Map) {}\n\n    /* 下面是事件处理 */\n\n    public handleChangeFirstLevelCheckBox(value) {\n      if (value) {\n        this.showFirstLevelBorder();\n      } else {\n        this.map.removeLayer(this.FIRST_LEVEL_LAYER_ID);\n      }\n    }\n\n    public handleChangeSecondLevelCheckBox(value) {\n      if (value) {\n        this.showSecondLevelBorder();\n      } else {\n        this.map.removeLayer(this.SECOND_LEVEL_LAYER_ID);\n      }\n    }\n\n    public handleChangeThirdLevelCheckBox(value) {\n      if (value) {\n        this.showThirdLevelBorder();\n      } else {\n        this.map.removeLayer(this.THIRD_LEVEL_LAYER_ID);\n        this.map.removeSource(this.FIRST_LEVEL_LAYER_ID);\n      }\n    }\n\n    public showFirstLevelBorder() {\n      Logger.info(this.TAG, \"show first level border\");\n      // 未加载过\n      if (!this.firstLevelLayer) {\n        this.map.addSource(this.FIRST_LEVEL_LAYER_ID, {\n          type: 'vector',\n          url: 'mapbox://vsr2018.78vj6bhk'\n        });\n        let layer: mapboxgl.Layer = {\n          id: this.FIRST_LEVEL_LAYER_ID,\n          type: \"line\",\n          source: this.FIRST_LEVEL_LAYER_ID,\n          'source-layer': 'first-6jawx0',\n          paint: this.borderPaint\n        };\n        this.firstLevelLayer = layer;\n      }\n      this.map.addLayer(this.firstLevelLayer);\n      this.map.on('sourcedata', this.FIRST_LEVEL_LAYER_ID, () => {\n        Logger.info(this.TAG, 'load layer');\n      })\n    }\n\n    public showSecondLevelBorder() {\n      Logger.info(this.TAG, \"showSecondLevelBorder\");\n      // 未加载过\n      if (!this.secondLevelLayer) {\n        this.map.addSource(this.SECOND_LEVEL_LAYER_ID, {\n          type: 'vector',\n          url: 'mapbox://vsr2018.050px5x2'\n        });\n        let layer: mapboxgl.Layer = {\n          id: this.SECOND_LEVEL_LAYER_ID,\n          type: \"line\",\n          source: this.SECOND_LEVEL_LAYER_ID,\n          paint: this.borderPaint,\n          'source-layer': 'second-dsvifq'\n        };\n        this.secondLevelLayer = layer;\n      }\n      this.map.addLayer(this.secondLevelLayer);\n    }\n\n    public showThirdLevelBorder() {\n      Logger.info(this.TAG, \"showThirdLevelBorder\");\n      // 未加载过\n      if (!this.thirdLevelLayer) {\n        this.map.addSource(this.THIRD_LEVEL_LAYER_ID, {\n          type: 'vector',\n          url: 'mapbox://vsr2018.5tz0fat5'\n        });\n        let layer: mapboxgl.Layer = {\n          id: this.THIRD_LEVEL_LAYER_ID,\n          type: \"line\",\n          source: this.THIRD_LEVEL_LAYER_ID,\n          paint: this.borderPaint,\n          'source-layer': 'third-dppmjz'\n        };\n        this.thirdLevelLayer = layer;\n      }\n      this.map.addLayer(this.thirdLevelLayer);\n    }\n  }\n<\/script>\n\n\n<style scoped>\n    .outer {\n        position: relative;\n        /*background-image: linear-gradient( 135deg, #92FFC0 30%, #00266150 100%);*/\n        background: inherit;\n        width: 100%;\n        box-shadow: rgba(0, 0, 0, 0.5) 0 0 10px;\n    }\n\n    #map-container {\n        height: 800px;\n        width: 100%;\n    }\n\n    .border-control {\n        top: 10px;\n        left: 10px;\n        display: inline-block;\n        /*width: 20px;*/\n        position: absolute;\n        z-index: 999;\n    }\n</style>"],sourceRoot:""}])},hnwL:function(e,t,n){var o=n("9FP4");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals),n("SZ7m")("78f15501",o,!0,{})},iFuS:function(e,t,n){"use strict";var o,r=n("AfiY"),i=n("YGYh"),a=n("aICe"),s=n("fR+o"),c=n("+IY/"),l=n("Kw5r"),u=n("YKMj"),p=n("jF86"),h=n("LdhC"),d=n("4ZJM"),f=n.n(d),y=n("OK+q"),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e){function t(){var t=e.call(this)||this;return t.TAG="PovertyMap",t.FIRST_LEVEL_LAYER_ID="first-level",t.SECOND_LEVEL_LAYER_ID="second-level",t.THIRD_LEVEL_LAYER_ID="third-level",t.borderPaint={"line-color":"rgba(255,255,255,0.5)","line-width":2},h.a.info(t.TAG,"constructor"),t.query="",t.searchItems=[],t.nominatimService=new p.a,t}return v(t,e),t.prototype.onMapUrlChange=function(e,t){h.a.info(this.TAG,e,t),this.map.setStyle(e)},t.prototype.mounted=function(){h.a.info(this.TAG,"mounted"),this.initMap()},t.prototype.initMap=function(){var e=this;h.a.info(this.TAG,"start init map"),f.a.accessToken=y.a,this.map=new f.a.Map({container:"map-container",style:this.mapUrl,maxBounds:y.b}),this.map.addControl(new f.a.NavigationControl),this.map.addControl(new f.a.ScaleControl),this.map.on("load",function(){e.onMapLoad(e.map)})},t.prototype.onMapLoad=function(e){},t.prototype.handleChangeFirstLevelCheckBox=function(e){e?this.showFirstLevelBorder():this.map.removeLayer(this.FIRST_LEVEL_LAYER_ID)},t.prototype.handleChangeSecondLevelCheckBox=function(e){e?this.showSecondLevelBorder():this.map.removeLayer(this.SECOND_LEVEL_LAYER_ID)},t.prototype.handleChangeThirdLevelCheckBox=function(e){e?this.showThirdLevelBorder():(this.map.removeLayer(this.THIRD_LEVEL_LAYER_ID),this.map.removeSource(this.FIRST_LEVEL_LAYER_ID))},t.prototype.showFirstLevelBorder=function(){var e=this;if(h.a.info(this.TAG,"show first level border"),!this.firstLevelLayer){this.map.addSource(this.FIRST_LEVEL_LAYER_ID,{type:"vector",url:"mapbox://vsr2018.78vj6bhk"});var t={id:this.FIRST_LEVEL_LAYER_ID,type:"line",source:this.FIRST_LEVEL_LAYER_ID,"source-layer":"first-6jawx0",paint:this.borderPaint};this.firstLevelLayer=t}this.map.addLayer(this.firstLevelLayer),this.map.on("sourcedata",this.FIRST_LEVEL_LAYER_ID,function(){h.a.info(e.TAG,"load layer")})},t.prototype.showSecondLevelBorder=function(){if(h.a.info(this.TAG,"showSecondLevelBorder"),!this.secondLevelLayer){this.map.addSource(this.SECOND_LEVEL_LAYER_ID,{type:"vector",url:"mapbox://vsr2018.050px5x2"});var e={id:this.SECOND_LEVEL_LAYER_ID,type:"line",source:this.SECOND_LEVEL_LAYER_ID,paint:this.borderPaint,"source-layer":"second-dsvifq"};this.secondLevelLayer=e}this.map.addLayer(this.secondLevelLayer)},t.prototype.showThirdLevelBorder=function(){if(h.a.info(this.TAG,"showThirdLevelBorder"),!this.thirdLevelLayer){this.map.addSource(this.THIRD_LEVEL_LAYER_ID,{type:"vector",url:"mapbox://vsr2018.5tz0fat5"});var e={id:this.THIRD_LEVEL_LAYER_ID,type:"line",source:this.THIRD_LEVEL_LAYER_ID,paint:this.borderPaint,"source-layer":"third-dppmjz"};this.thirdLevelLayer=e}this.map.addLayer(this.thirdLevelLayer)},b([Object(u.c)({default:function(){return"mapbox://styles/mapbox/satellite-v9"}})],t.prototype,"mapUrl",void 0),b([Object(u.e)("mapUrl")],t.prototype,"onMapUrlChange",null),b([Object(u.b)()],t.prototype,"onMapLoad",null),b([Object(u.a)({components:{Dropdown:c.a,Tooltip:s.a,DropdownMenu:a.a,Checkbox:i.a,Button:r.a}})],t)}(l.default),g=(n("4spQ"),n("KHd+")),E=Object(g.a)(S,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"outer"},[n("div",{staticClass:"border-control"},[n("Dropdown",{staticStyle:{position:"relative"},attrs:{trigger:"click",placement:"bottom-start"}},[n("Tooltip",{attrs:{content:"边界",placement:"right"}},[n("Button",{attrs:{icon:"ios-browsers"}})],1),e._v(" "),n("DropdownMenu",{staticStyle:{"text-align":"left",width:"130px"},attrs:{slot:"list"},slot:"list"},[n("div",{staticStyle:{display:"flex","flex-direction":"column",padding:"10px"}},[n("Checkbox",{attrs:{label:"一级行政区边界"},on:{"on-change":e.handleChangeFirstLevelCheckBox}},[e._v("一级行政区边界")]),e._v(" "),n("Checkbox",{attrs:{label:"二级行政区边界"},on:{"on-change":e.handleChangeSecondLevelCheckBox}},[e._v("二级行政区边界")]),e._v(" "),n("Checkbox",{attrs:{label:"三级行政区边界"},on:{"on-change":e.handleChangeThirdLevelCheckBox}},[e._v("三级行政区边界")])],1)])],1)],1),e._v(" "),n("div",{attrs:{id:"map-container"}})])},[],!1,null,"104067d7",null);t.a=E.exports},jF86:function(e,t,n){"use strict";var o=n("LdhC"),r=function(){function e(){}return e.prototype.search=function(e){return function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var t,n,r;return function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(i){switch(i.label){case 0:t="https://nominatim.openstreetmap.org/search?format=json&q="+decodeURIComponent(e),o.a.info(this,"start to fetch "+t),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(t)];case 2:return[4,(n=i.sent()).json()];case 3:return n=i.sent(),o.a.info(this,"fetch success",n),[2,n];case 4:throw r=i.sent(),o.a.error(this,"fetch error",r),r;case 5:return[2]}})})},e}();t.a=r},rX3U:function(e,t,n){(e.exports=n("I1BE")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"SearchPlace.vue?vue&type=style&index=0&id=481544e3&scoped=true&lang=css",sourceRoot:""}])},vL7V:function(e,t,n){"use strict";var o=n("6Ev8");n.n(o).a}}]);
//# sourceMappingURL=4.6ed7966cb65153ddd8d2.js.map